<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="SpellRightPro - Advanced spelling bee practice app with hands-free mode and premium features">
    <meta name="keywords" content="spelling, bee, practice, education, words, vocabulary">
    <meta name="author" content="SpellRightPro Team">
    
    <!-- Theme Color for Mobile Browsers -->
    <meta name="theme-color" content="#4361ee">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="main-freemium-bee.js" as="script">
    
    <title>SpellRightPro - Spelling Bee Practice</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Preconnect to External Domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "SpellRightPro",
        "description": "Advanced spelling bee practice application with hands-free mode",
        "applicationCategory": "EducationalApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="app-loading" class="loading-overlay" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        color: white;
        font-family: system-ui, -apple-system, sans-serif;
    ">
        <div class="loading-content" style="text-align: center;">
            <div class="loading-spinner" style="
                width: 60px;
                height: 60px;
                border: 4px solid rgba(255, 255, 255, 0.3);
                border-top: 4px solid white;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin: 0 auto 2rem;
            "></div>
            <h1 style="font-size: 2.5rem; margin-bottom: 1rem; font-weight: 700;">SpellRightPro</h1>
            <p style="font-size: 1.2rem; opacity: 0.9;">Loading your spelling adventure...</p>
        </div>
    </div>

    <!-- Main Application -->
    <div class="container" style="display: none;">
        <!-- Navigation Bar -->
        <nav class="navbar" role="navigation" aria-label="Main navigation">
            <div class="brand">
                <img src="/assets/logo.svg" alt="SpellRightPro Logo" class="logo" onerror="this.style.display='none'">
                <span>SpellRightPro<br><small class="subtitle">Spelling Bee</small></span>
            </div>
            
            <div class="nav-actions">
                <button class="btn-icon" id="theme-toggle" aria-label="Toggle dark mode">
                    üåô
                </button>
                <button class="btn-secondary premium-button" id="premium-main-btn">
                    ‚≠ê Premium
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main role="main">
            <div class="training-card">
                <!-- Header Section -->
                <header class="card-header">
                    <h1 class="card-title">Spelling Bee Practice</h1>
                    <p class="card-subtitle" style="
                        text-align: center;
                        color: var(--gray);
                        margin-bottom: 2rem;
                        font-size: 1.1rem;
                    ">Improve your spelling skills with interactive practice</p>
                </header>

                <!-- Mode Selector -->
                <section class="mode-section" aria-labelledby="mode-heading">
                    <h2 id="mode-heading" class="section-label">Practice Mode</h2>
                    <div class="mode-selector" role="radiogroup" aria-labelledby="mode-heading">
                        <button class="btn-mode active" data-mode="hands-free" role="radio" aria-checked="true">
                            <span class="mode-icon">üé§</span>
                            Hands-Free
                        </button>
                        <button class="btn-mode" data-mode="text" role="radio" aria-checked="false">
                            <span class="mode-icon">üìù</span>
                            Text Mode
                        </button>
                    </div>
                </section>

                <!-- Accent Selector -->
                <section class="accent-section" aria-labelledby="accent-heading">
                    <h2 id="accent-heading" class="section-label">Pronunciation Accent</h2>
                    <div class="accent-picker" role="radiogroup" aria-labelledby="accent-heading">
                        <button class="accent-btn active" data-accent="us" role="radio" aria-checked="true">
                            <span class="flag-icon">üá∫üá∏</span>
                            US English
                        </button>
                        <button class="accent-btn" data-accent="uk" role="radio" aria-checked="false">
                            <span class="flag-icon">üá¨üáß</span>
                            UK English
                        </button>
                        <button class="accent-btn" data-accent="au" role="radio" aria-checked="false">
                            <span class="flag-icon">üá¶üá∫</span>
                            AU English
                        </button>
                    </div>
                </section>

                <!-- Custom Words Section -->
                <section class="custom-words-section" aria-labelledby="words-heading">
                    <h2 id="words-heading" class="section-label">Custom Words</h2>
                    
                    <div class="input-group">
                        <textarea 
                            id="words-textarea"
                            placeholder="Enter words separated by commas, spaces, or new lines...
Example: apple, banana, cherry
Or: apple banana cherry
Or: 
apple
banana
cherry"
                            aria-labelledby="words-heading"
                            rows="6"
                        ></textarea>
                    </div>

                    <div class="file-upload">
                        <div class="btn-upload" role="button" tabindex="0">
                            <span class="upload-icon">üìÅ</span>
                            Upload Text File
                            <input type="file" id="file-input" accept=".txt,.csv" aria-label="Upload word list file">
                        </div>
                    </div>

                    <div class="info-box" role="note">
                        <p>
                            <strong>Freemium:</strong> One custom list per day. 
                            <button class="text-link" onclick="app.handlePremiumClick()" style="
                                background: none;
                                border: none;
                                color: var(--primary);
                                text-decoration: underline;
                                cursor: pointer;
                            ">Upgrade to Premium</button> for unlimited custom words and advanced features.
                        </p>
                    </div>

                    <div class="word-count" id="word-count" style="
                        text-align: center;
                        color: var(--gray);
                        font-size: 0.9rem;
                        margin-top: 1rem;
                    ">
                        0 words added
                    </div>
                </section>

                <!-- Action Section -->
                <section class="action-section">
                    <button class="btn-start" id="start-button" aria-label="Start spelling bee practice">
                        <span class="btn-icon">üêù</span>
                        Start Spelling Bee
                    </button>
                </section>

                <!-- Letters Pad (Initially Hidden) -->
                <section class="letters-section" aria-labelledby="letters-heading" hidden>
                    <h2 id="letters-heading" class="sr-only">Letter Selection</h2>
                    <div class="letters-pad" id="letters-pad" role="group" aria-labelledby="letters-heading">
                        <!-- Letters will be dynamically generated -->
                    </div>
                </section>

                <!-- Trainer Area (Initially Hidden) -->
                <section class="trainer-area hidden" id="trainer-area" aria-labelledby="trainer-heading">
                    <h2 id="trainer-heading" class="sr-only">Spelling Practice</h2>
                    
                    <!-- Progress Indicator -->
                    <div class="word-progress" id="word-progress" aria-live="polite">
                        Word 1 of 10
                    </div>

                    <!-- Input Area -->
                    <div class="input-group">
                        <label for="spelling-input" class="sr-only">Enter the spelled word</label>
                        <input 
                            type="text" 
                            id="spelling-input"
                            class="form-control"
                            placeholder="Spell the word you hear..."
                            aria-describedby="input-help"
                        >
                        <div id="input-help" class="sr-only">
                            Type the word you heard or use the letter buttons above
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="button-group">
                        <button class="btn-secondary" id="prev-button" aria-label="Previous word">
                            ‚Üê Previous
                        </button>
                        <button class="btn-secondary" id="repeat-button" aria-label="Repeat word">
                            üîÑ Repeat
                        </button>
                        <button class="btn-primary" id="submit-button" aria-label="Submit spelling">
                            ‚úÖ Submit
                        </button>
                    </div>

                    <!-- Feedback Area -->
                    <div class="feedback" id="feedback-area" aria-live="polite">
                        <!-- Feedback messages will appear here -->
                    </div>
                </section>

                <!-- Results Summary (Initially Hidden) -->
                <section class="summary-area hidden" id="summary-area" aria-labelledby="results-heading">
                    <h2 id="results-heading" class="sr-only">Practice Results</h2>
                    <!-- Results will be dynamically generated -->
                </section>
            </div>
        </main>

        <!-- Advertisement Section (Freemium) -->
        <aside class="ad-section" aria-label="Advertisement" style="
            margin: 2rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            text-align: center;
        ">
            <div class="ad-content">
                <p style="margin-bottom: 1rem; color: var(--gray);">
                    üöÄ <strong>Upgrade to Premium</strong> for an ad-free experience and unlimited features!
                </p>
                <button class="btn-secondary" onclick="app.handlePremiumClick()">
                    Learn More About Premium
                </button>
            </div>
        </aside>

        <!-- Footer -->
        <footer class="app-footer" style="
            text-align: center;
            padding: 2rem 0;
            color: var(--gray);
            font-size: 0.9rem;
        ">
            <p>&copy; 2024 SpellRightPro. All rights reserved.</p>
            <div class="footer-links" style="margin-top: 1rem;">
                <a href="/privacy" style="color: var(--gray); margin: 0 1rem;">Privacy Policy</a>
                <a href="/terms" style="color: var(--gray); margin: 0 1rem;">Terms of Service</a>
                <a href="/contact" style="color: var(--gray); margin: 0 1rem;">Contact Support</a>
            </div>
        </footer>
    </div>

    <!-- Premium Modal -->
    <div id="premium-modal" class="modal-overlay" aria-hidden="true" aria-labelledby="premium-modal-title">
        <!-- Modal content will be dynamically generated -->
    </div>

    <!-- Screen Reader Only Content -->
    <div class="sr-only" aria-live="polite" aria-atomic="true">
        <!-- For screen reader announcements -->
    </div>

    <!-- JavaScript -->
    <script src="main-freemium-bee.js"></script>
    
    <!-- Inline Script for Immediate Functionality -->
    <script>
        // Remove loading screen and show main content
        window.addEventListener('load', function() {
            setTimeout(() => {
                const loading = document.getElementById('app-loading');
                const main = document.querySelector('.container');
                
                if (loading) {
                    loading.style.opacity = '0';
                    loading.style.transition = 'opacity 0.5s ease';
                    setTimeout(() => loading.remove(), 500);
                }
                
                if (main) {
                    main.style.display = 'block';
                }
            }, 1000);
        });

        // Basic error handling for critical failures
        window.addEventListener('error', function(event) {
            console.error('Critical error:', event.error);
        });
    </script>
</body>
</html>
