<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SpellRightPro — Premium</title>

  <!-- Styles -->
  <link rel="stylesheet" href="/css/premium.css"/>
  <link rel="stylesheet" href="/css/styles.css"/>
  <link rel="preload" href="/assets/logo.png" as="image" fetchpriority="high"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>

  <!-- Firebase (config.js must call firebase.initializeApp with your real keys) -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
  <script src="/js/config.js"></script>

    <!-- Scripts -->
  <script src="/js/audio-guards.js"></script>
  <script src="/js/oet_word_list.js" defer></script>
  <script src="/js/main-premium.js" defer></script>

  <style>
    /* Minimal overlay styling (glass, purple gradient compatible) */
    .auth-backdrop {
      position: fixed; inset: 0; background: rgba(0,0,0,.55); backdrop-filter: blur(8px);
      display: none; align-items: center; justify-content: center; z-index: 10000;
    }
    .auth-card {
      width: 100%; max-width: 420px;
      background: linear-gradient(135deg, rgba(255,255,255,.92), rgba(248,250,252,.92));
      border: 1px solid rgba(255,255,255,.8); border-radius: 20px; box-shadow: var(--shadow-xl);
      padding: 24px;
    }
    .auth-card h3 { margin-bottom: 12px; text-align: center; }
    .auth-tabs { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 12px; }
    .auth-tab { border: 1px solid #e9ecef; background: #fff; border-radius: 10px; padding: 10px; cursor: pointer; font-weight: 600; }
    .auth-tab.active { background: linear-gradient(135deg,var(--primary),var(--secondary)); color: #fff; border-color: transparent; }
    .auth-row { display: grid; gap: 10px; margin: 12px 0; }
    .auth-row input { padding: 12px; border: 2px solid #e9ecef; border-radius: 12px; font-size: 15px; }
    .btn-wide { width: 100%; padding: 12px 16px; border: none; border-radius: 12px; font-weight: 700; }
    .btn-google { background: #fff; border: 2px solid #e9ecef; }
    .btn-primary-x { background: linear-gradient(135deg,var(--primary),var(--secondary)); color: #fff; }
    .auth-help { display: flex; justify-content: space-between; font-size: .9rem; }
    .auth-help a { color: var(--primary); text-decoration: none; }
    .auth-msg { text-align:center; font-size: .95rem; min-height: 1.2em; color: var(--gray); }
    .hidden { display: none !important; }
    .nav-btn.logout { margin-left: 8px; }
    @media (max-width: 480px){ .auth-card{margin:0 12px;} }
  </style>
</head>

<body data-premium="1">
  <header class="navbar">
    <div class="brand">
      <img src="/assets/logo.png" alt="SpellRightPro" class="logo" height="40"/>
      <span>SpellRightPro</span>
      <small class="subtitle">Premium</small>
    </div>
    <div class="nav-actions">
      <button class="nav-btn" onclick="location.href='/index.html'">
        <i class="fa fa-house"></i> Home
      </button>
      <button id="darkModeToggle" class="nav-btn" aria-label="Toggle dark mode">
        <i class="fa fa-moon"></i>
      </button>
      <button id="btnLogout" class="nav-btn logout hidden">
        <i class="fa fa-right-from-bracket"></i> Logout
      </button>
    </div>
  </header>

  <main class="container">
    <div class="training-card">
      <h2 class="card-title">Premium Dashboard</h2>
      <p class="subtitle text-center">
        Unlimited custom lists, voice & writing evaluation, and detailed summaries.
      </p>

      <!-- Tabs -->
      <div class="mode-selector" role="tablist" aria-label="Premium modes">
        <button class="btn-mode active" id="tabBee" role="tab" aria-selected="true">
          <i class="fa fa-microphone"></i> Bee
        </button>
        <button class="btn-mode" id="tabSchool" role="tab" aria-selected="false">
          <i class="fa fa-pen-to-square"></i> School
        </button>
        <button class="btn-mode" id="tabOet" role="tab" aria-selected="false">
          <i class="fa fa-stethoscope"></i> OET
        </button>
      </div>

      <!-- Bee -->
      <section id="secBee" class="trainer-area active" role="tabpanel" aria-labelledby="tabBee">
        <p class="info-box"><strong>Bee mode:</strong> hands-free spelling with voice recognition. The word is not shown.</p>

        <div class="custom-words-section">
          <label class="section-label">Custom words (unlimited)</label>
          <textarea id="beeCustom" placeholder="comma or new-line separated"></textarea>
          <div class="file-upload">
            <label class="btn-upload">
              <i class="fa fa-file-arrow-up"></i> Upload list (.txt, .csv)
              <input type="file" id="beeFile" accept=".txt,.csv" />
            </label>
          </div>
          <div class="button-group">
            <button id="beeLoad" class="btn-secondary"><i class="fa fa-plus"></i> Use Custom List</button>
          </div>
        </div>

        <div class="button-group">
          <button id="beeStart" class="btn-start"><i class="fa fa-microphone"></i> Start</button>
          <button id="beeSay" class="btn-secondary"><i class="fa fa-volume-high"></i> Say Again</button>
          <button id="beeFlag" class="btn-icon" title="Flag"><i class="fa fa-flag"></i></button>
          <button id="beeEnd" class="btn-secondary"><i class="fa fa-stop"></i> End</button>
        </div>

        <div id="beeProgress" class="word-progress"></div>
        <div id="beeFeedback" class="feedback"></div>
        <div id="beeSummary" class="summary-area"></div>
      </section>

      <!-- School -->
      <section id="secSchool" class="trainer-area" role="tabpanel" aria-labelledby="tabSchool">
        <p class="info-box"><strong>School mode:</strong> type what you hear. Field clears immediately after marking.</p>

        <div class="custom-words-section">
          <label class="section-label">Custom words (unlimited)</label>
          <textarea id="schoolCustom" placeholder="comma or new-line separated"></textarea>
          <div class="file-upload">
            <label class="btn-upload">
              <i class="fa fa-file-arrow-up"></i> Upload list (.txt, .csv)
              <input type="file" id="schoolFile" accept=".txt,.csv" />
            </label>
          </div>
          <div class="button-group">
            <button id="schoolLoad" class="btn-secondary"><i class="fa fa-plus"></i> Use Custom List</button>
          </div>
        </div>

        <div class="button-group">
          <button id="schoolStart" class="btn-start"><i class="fa fa-play"></i> Start</button>
          <input id="schoolAnswer" type="text" class="form-control" placeholder="Type spelling…"/>
          <button id="schoolSubmit" class="btn-primary"><i class="fa fa-check"></i> Submit</button>
          <button id="schoolFlag" class="btn-icon" title="Flag"><i class="fa fa-flag"></i></button>
          <button id="schoolEnd" class="btn-secondary"><i class="fa fa-stop"></i> End</button>
        </div>

        <div id="schoolProgress" class="word-progress"></div>
        <div id="schoolFeedback" class="feedback"></div>
        <div id="schoolSummary" class="summary-area"></div>
      </section>

      <!-- OET -->
      <section id="secOet" class="trainer-area" role="tabpanel" aria-labelledby="tabOet">
        <p class="info-box"><strong>OET healthcare:</strong> Practice uses full list; Exam picks 24 random.</p>

        <div class="button-group">
          <button id="oetPractice" class="btn-secondary">Practice</button>
          <button id="oetExam" class="btn-secondary">Exam (24)</button>
        </div>

        <div class="custom-words-section">
          <label class="section-label">Custom medical words (unlimited)</label>
          <textarea id="oetCustom" placeholder="comma or new-line separated"></textarea>
          <div class="file-upload">
            <label class="btn-upload">
              <i class="fa fa-file-arrow-up"></i> Upload list (.txt, .csv)
              <input type="file" id="oetFile" accept=".txt,.csv" />
            </label>
          </div>
          <div class="button-group">
            <button id="oetLoad" class="btn-secondary"><i class="fa fa-plus"></i> Use Custom List</button>
          </div>
        </div>

        <div class="button-group">
          <button id="oetStart" class="btn-start"><i class="fa fa-play"></i> Start</button>
          <input id="oetAnswer" type="text" class="form-control" placeholder="Type spelling…"/>
          <button id="oetSubmit" class="btn-primary"><i class="fa fa-check"></i> Submit</button>
          <button id="oetFlag" class="btn-icon" title="Flag"><i class="fa fa-flag"></i></button>
          <button id="oetEnd" class="btn-secondary"><i class="fa fa-stop"></i> End</button>
        </div>

        <div id="oetProgress" class="word-progress"></div>
        <div id="oetFeedback" class="feedback"></div>
        <div id="oetSummary" class="summary-area"></div>
      </section>
    </div>
  </main>

  <!-- AUTH OVERLAY -->
  <div id="authOverlay" class="auth-backdrop" aria-modal="true" role="dialog" aria-labelledby="authTitle">
    <div class="auth-card">
      <h3 id="authTitle">Sign in to Premium</h3>

      <div class="auth-tabs">
        <button id="authTabLogin" class="auth-tab active">Login</button>
        <button id="authTabSignup" class="auth-tab">Register</button>
      </div>

      <div class="auth-row">
        <button id="btnGoogle" class="btn-wide btn-google">
          <i class="fa-brands fa-google"></i> Continue with Google
        </button>
      </div>

      <div class="auth-row">
        <input type="email" id="authEmail" placeholder="Email" autocomplete="email"/>
        <input type="password" id="authPass" placeholder="Password" autocomplete="current-password"/>
      </div>

      <div class="auth-row">
        <button id="btnEmailLogin"  class="btn-wide btn-primary-x">Login</button>
        <button id="btnEmailSignup" class="btn-wide btn-primary-x hidden">Create account</button>
      </div>

      <div class="auth-help">
        <a href="#" id="linkForgot">Forgot password?</a>
        <span id="authToggleText">New here? Click “Register”.</span>
      </div>

      <div id="authMsg" class="auth-msg"></div>
    </div>
  </div>

  <!-- Dark mode -->
  <script>
    (function(){
      const toggle = document.getElementById('darkModeToggle');
      function apply() {
        const on = localStorage.getItem('dark') === 'true';
        document.body.classList.toggle('dark-mode', on);
        if (toggle) toggle.querySelector('i').className = on ? 'fa fa-sun' : 'fa fa-moon';
      }
      if (toggle) {
        toggle.addEventListener('click', () => {
          const on = !(localStorage.getItem('dark') === 'true');
          localStorage.setItem('dark', on);
          apply();
        });
      }
      apply();
    })();
  </script>
</body>
</html>
